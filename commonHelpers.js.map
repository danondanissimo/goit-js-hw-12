{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// Описаний у документації\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst searchForm = document.querySelector('.js-search-form');\nconst photoContainer = document.querySelector('.js-photo-container');\nconst loader = document.querySelector('.loader');\n\n// loader.style.display = 'none';\n\nsearchForm.addEventListener('submit', e => {\n  e.preventDefault();\n\n  const name = e.target.elements.query.value;\n  loader.style.display = 'block';\n  searchPhoto(name)\n    .then(data => {\n      renderPhoto(data);\n    })\n    .finally(() => (loader.style.display = 'none'));\n\n  e.target.reset();\n});\n\nfunction searchPhoto(searchedImage) {\n  const BASE_URL = 'https://pixabay.com/api/';\n  const PARAMS = `?key=42185111-4f5cd61d4ffab1c12875fcbb6&q=${searchedImage}&image_type=photo&orientation=horizontal&safesearch=true`;\n  const url = BASE_URL + PARAMS;\n  // loader.style.display = 'inline-block';\n  return fetch(url).then(res => {\n    if (!res.ok) {\n      throw new Error(res.status);\n    } else {\n      return res.json();\n    }\n  });\n}\n\nfunction photoTemplate(photo) {\n  return photo.hits\n    .map(\n      photo => `<li class=\"gallery-item\"><a class=\"gallery-link\" href=\"${photo.largeImageURL}\">\n    <img\n      src=\"${photo.webformatURL}\"\n      data-source=\"${photo.largeImageURL}\"\n      alt=\"${photo.tags}\"\n      class=\"gallery-image\"\n      \n    /></a>  \n\n  <div class=\"image-stats-block\">\n<ul class=\"image-stats-list\">\n  <li class=\"image-stats-item\"><p class=\"image-stats-text\">Likes:<br><span class=\"image-stats-value\">${photo.likes}</span></p>\n</li>\n<li class=\"image-stats-item\">\n  <p class=\"image-stats-text\">Views:<br><span class=\"image-stats-value\">${photo.views}</span></p>\n</li>\n<li class=\"image-stats-item\">\n  <p class=\"image-stats-text\">Comments:<br><span class=\"image-stats-value\">${photo.comments}</span></p>\n</li>\n<li class=\"image-stats-item\">\n  <p class=\"image-stats-text\">Downloads:<br><span class=\"image-stats-value\">${photo.downloads}</span></p>\n</li>\n</ul>\n  </div></li>`\n    )\n    .join('');\n}\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\n// photoContainer.addEventListener('load', () => {\n//   loader.style.display = 'none';\n// });\n\nfunction renderPhoto(photo) {\n  photoContainer.replaceChildren();\n  if (photo.hits.length === 0) {\n    iziToast.show({\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n      closeOnClick: true,\n      closeOnEscape: true,\n    });\n    // loader.style.display = 'none';\n  } else {\n    const markup = photoTemplate(photo);\n    // loader.style.display = 'inline-block';\n    photoContainer.insertAdjacentHTML('afterbegin', markup);\n    lightbox.refresh();\n  }\n}\n"],"names":["searchForm","photoContainer","loader","e","name","searchPhoto","data","renderPhoto","searchedImage","BASE_URL","PARAMS","url","res","photoTemplate","photo","lightbox","SimpleLightbox","iziToast","markup"],"mappings":"6vBAUA,MAAMA,EAAa,SAAS,cAAc,iBAAiB,EACrDC,EAAiB,SAAS,cAAc,qBAAqB,EAC7DC,EAAS,SAAS,cAAc,SAAS,EAI/CF,EAAW,iBAAiB,SAAUG,GAAK,CACzCA,EAAE,eAAc,EAEhB,MAAMC,EAAOD,EAAE,OAAO,SAAS,MAAM,MACrCD,EAAO,MAAM,QAAU,QACvBG,EAAYD,CAAI,EACb,KAAKE,GAAQ,CACZC,EAAYD,CAAI,CACtB,CAAK,EACA,QAAQ,IAAOJ,EAAO,MAAM,QAAU,MAAO,EAEhDC,EAAE,OAAO,OACX,CAAC,EAED,SAASE,EAAYG,EAAe,CAClC,MAAMC,EAAW,2BACXC,EAAS,6CAA6CF,CAAa,2DACnEG,EAAMF,EAAWC,EAEvB,OAAO,MAAMC,CAAG,EAAE,KAAKC,GAAO,CAC5B,GAAKA,EAAI,GAGP,OAAOA,EAAI,OAFX,MAAM,IAAI,MAAMA,EAAI,MAAM,CAIhC,CAAG,CACH,CAEA,SAASC,EAAcC,EAAO,CAC5B,OAAOA,EAAM,KACV,IACCA,GAAS,0DAA0DA,EAAM,aAAa;AAAA;AAAA,aAE/EA,EAAM,YAAY;AAAA,qBACVA,EAAM,aAAa;AAAA,aAC3BA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uGAOgFA,EAAM,KAAK;AAAA;AAAA;AAAA,0EAGxCA,EAAM,KAAK;AAAA;AAAA;AAAA,6EAGRA,EAAM,QAAQ;AAAA;AAAA;AAAA,8EAGbA,EAAM,SAAS;AAAA;AAAA;AAAA,cAIxF,EACA,KAAK,EAAE,CACZ,CAEA,MAAMC,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,GAChB,CAAC,EAMD,SAAST,EAAYO,EAAO,CAE1B,GADAb,EAAe,gBAAe,EAC1Ba,EAAM,KAAK,SAAW,EACxBG,EAAS,KAAK,CACZ,QACE,2EACF,aAAc,GACd,cAAe,EACrB,CAAK,MAEI,CACL,MAAMC,EAASL,EAAcC,CAAK,EAElCb,EAAe,mBAAmB,aAAciB,CAAM,EACtDH,EAAS,QAAO,CACjB,CACH"}