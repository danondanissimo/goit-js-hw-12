{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// Описаний у документації\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport axios from 'axios';\n\nconst searchForm = document.querySelector('.js-search-form');\nconst photoContainer = document.querySelector('.js-photo-container');\nconst loadMore = document.querySelector('.js-load-more');\nconst loader = document.querySelector('.loader');\n\nlet currentPage = 1;\n\nlet defaultPageSize = 15;\n\nlet currentQuery = '';\n\nlet totalResult = 0;\n\n// loader.style.display = 'none';\n\n// searchForm.addEventListener('submit', e => {\n//   e.preventDefault();\n\n//   const name = e.target.elements.query.value;\n//   loader.style.display = 'block';\n//   searchPhoto(name)\n//     .then(data => {\n//       renderPhoto(data);\n//     })\n//     .finally(() => (loader.style.display = 'none'));\n\n//   e.target.reset();\n// });\n\n// function searchPhoto(searchedImage) {\n//   const BASE_URL = 'https://pixabay.com/api/';\n//   const PARAMS = `?key=42185111-4f5cd61d4ffab1c12875fcbb6&q=${searchedImage}&image_type=photo&orientation=horizontal&safesearch=true`;\n//   const url = BASE_URL + PARAMS;\n//   // loader.style.display = 'inline-block';\n//   return fetch(url).then(res => {\n//     if (!res.ok) {\n//       throw new Error(res.status);\n//     } else {\n//       return res.json();\n//     }\n//   });\n// }\n\nfunction photoTemplate(photo) {\n  return photo.hits\n    .map(\n      photo => `<li class=\"gallery-item\"><a class=\"gallery-link\" href=\"${photo.largeImageURL}\">\n    <img\n      src=\"${photo.webformatURL}\"\n      data-source=\"${photo.largeImageURL}\"\n      alt=\"${photo.tags}\"\n      class=\"gallery-image\"\n      \n    /></a>  \n\n  <div class=\"image-stats-block\">\n<ul class=\"image-stats-list\">\n  <li class=\"image-stats-item\"><p class=\"image-stats-text\">Likes:<br><span class=\"image-stats-value\">${photo.likes}</span></p>\n</li>\n<li class=\"image-stats-item\">\n  <p class=\"image-stats-text\">Views:<br><span class=\"image-stats-value\">${photo.views}</span></p>\n</li>\n<li class=\"image-stats-item\">\n  <p class=\"image-stats-text\">Comments:<br><span class=\"image-stats-value\">${photo.comments}</span></p>\n</li>\n<li class=\"image-stats-item\">\n  <p class=\"image-stats-text\">Downloads:<br><span class=\"image-stats-value\">${photo.downloads}</span></p>\n</li>\n</ul>\n  </div></li>`\n    )\n    .join('');\n}\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\n// photoContainer.addEventListener('load', () => {\n//   loader.style.display = 'none';\n// });\n\nfunction renderPhoto(photo) {\n  totalResult = photo.hits.length;\n  if (photo.hits.length === 0) {\n    iziToast.show({\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n      closeOnClick: true,\n      closeOnEscape: true,\n    });\n    // loader.style.display = 'none';\n  } else {\n    const markup = photoTemplate(photo);\n    // loader.style.display = 'inline-block';\n    photoContainer.insertAdjacentHTML('beforeend', markup);\n    lightbox.refresh();\n  }\n}\n\n// ====================================================================\n\nsearchForm.addEventListener('submit', e => {\n  e.preventDefault();\n  photoContainer.replaceChildren();\n  currentQuery = e.target.elements.query.value;\n  loader.style.display = 'block';\n  searchPhoto(currentQuery)\n    .then(data => {\n      renderPhoto(data);\n    })\n    .finally(() => (loader.style.display = 'none'));\n\n  e.target.reset();\n  checkButtonStatus();\n});\n\nloadMore.addEventListener('click', () => {\n  currentPage += 1;\n  loader.style.display = 'block';\n  searchPhoto(currentQuery)\n    .then(data => {\n      renderPhoto(data);\n    })\n    .finally(() => (loader.style.display = 'none'));\n  checkButtonStatus();\n});\n\nfunction searchPhoto(searchedImage) {\n  const BASE_URL = 'https://pixabay.com/api/';\n  const PARAMS = `?key=42185111-4f5cd61d4ffab1c12875fcbb6&q=${searchedImage}&image_type=photo&orientation=horizontal&safesearch=true&page=${currentPage}&per_page=${defaultPageSize}`;\n  const url = BASE_URL + PARAMS;\n  // loader.style.display = 'inline-block';\n\n  return axios.get(url).then(res => res.data);\n}\n\nfunction checkButtonStatus() {\n  // const maxPage = Math.ceil(totalResult / defaultPageSize);\n  const maxPage = 2;\n  if (currentPage === maxPage) {\n    loadMore.classList.add('hidden');\n    console.log('Yes, it is');\n  } else {\n    loadMore.classList.remove('hidden');\n  }\n}\n"],"names":["searchForm","photoContainer","loadMore","loader","currentPage","defaultPageSize","currentQuery","photoTemplate","photo","lightbox","SimpleLightbox","renderPhoto","iziToast","markup","e","searchPhoto","data","checkButtonStatus","searchedImage","BASE_URL","PARAMS","url","axios","res"],"mappings":"owBAYA,MAAMA,EAAa,SAAS,cAAc,iBAAiB,EACrDC,EAAiB,SAAS,cAAc,qBAAqB,EAC7DC,EAAW,SAAS,cAAc,eAAe,EACjDC,EAAS,SAAS,cAAc,SAAS,EAE/C,IAAIC,EAAc,EAEdC,EAAkB,GAElBC,EAAe,GAkCnB,SAASC,EAAcC,EAAO,CAC5B,OAAOA,EAAM,KACV,IACCA,GAAS,0DAA0DA,EAAM,aAAa;AAAA;AAAA,aAE/EA,EAAM,YAAY;AAAA,qBACVA,EAAM,aAAa;AAAA,aAC3BA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uGAOgFA,EAAM,KAAK;AAAA;AAAA;AAAA,0EAGxCA,EAAM,KAAK;AAAA;AAAA;AAAA,6EAGRA,EAAM,QAAQ;AAAA;AAAA;AAAA,8EAGbA,EAAM,SAAS;AAAA;AAAA;AAAA,cAIxF,EACA,KAAK,EAAE,CACZ,CAEA,MAAMC,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,GAChB,CAAC,EAMD,SAASC,EAAYH,EAAO,CAE1B,GADcA,EAAM,KAAK,OACrBA,EAAM,KAAK,SAAW,EACxBI,EAAS,KAAK,CACZ,QACE,2EACF,aAAc,GACd,cAAe,EACrB,CAAK,MAEI,CACL,MAAMC,EAASN,EAAcC,CAAK,EAElCP,EAAe,mBAAmB,YAAaY,CAAM,EACrDJ,EAAS,QAAO,CACjB,CACH,CAIAT,EAAW,iBAAiB,SAAUc,GAAK,CACzCA,EAAE,eAAc,EAChBb,EAAe,gBAAe,EAC9BK,EAAeQ,EAAE,OAAO,SAAS,MAAM,MACvCX,EAAO,MAAM,QAAU,QACvBY,EAAYT,CAAY,EACrB,KAAKU,GAAQ,CACZL,EAAYK,CAAI,CACtB,CAAK,EACA,QAAQ,IAAOb,EAAO,MAAM,QAAU,MAAO,EAEhDW,EAAE,OAAO,QACTG,GACF,CAAC,EAEDf,EAAS,iBAAiB,QAAS,IAAM,CACvCE,GAAe,EACfD,EAAO,MAAM,QAAU,QACvBY,EAAYT,CAAY,EACrB,KAAKU,GAAQ,CACZL,EAAYK,CAAI,CACtB,CAAK,EACA,QAAQ,IAAOb,EAAO,MAAM,QAAU,MAAO,EAChDc,GACF,CAAC,EAED,SAASF,EAAYG,EAAe,CAClC,MAAMC,EAAW,2BACXC,EAAS,6CAA6CF,CAAa,iEAAiEd,CAAW,aAAaC,CAAe,GAC3KgB,EAAMF,EAAWC,EAGvB,OAAOE,EAAM,IAAID,CAAG,EAAE,KAAKE,GAAOA,EAAI,IAAI,CAC5C,CAEA,SAASN,GAAoB,CAGvBb,IAAgB,GAClBF,EAAS,UAAU,IAAI,QAAQ,EAC/B,QAAQ,IAAI,YAAY,GAExBA,EAAS,UAAU,OAAO,QAAQ,CAEtC"}